<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Physics Simulation</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body, html {
            margin: 0;
            overflow: hidden;
            background: black;
        }
        canvas {
            display: block;
        }
    </style>
</head>
<body>
    <script>
        const { Engine, Render, Runner, Bodies, World, Events } = Matter;

        // Create engine and world
        const engine = Engine.create();
        const world = engine.world;

        // Create renderer
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: {
                width: window.innerWidth,
                height: window.innerHeight,
                wireframes: false,
                background: "black"
            }
        });

        Render.run(render);
        const runner = Runner.create();
        Runner.run(runner, engine);

        // Screen dimensions
        const width = window.innerWidth;
        const height = window.innerHeight;

        // Create jar boundaries
        const walls = [
            Bodies.rectangle(width / 2, height, width, 10, { isStatic: true }), // Bottom wall
            Bodies.rectangle(0, height / 2, 10, height, { isStatic: true }), // Left wall
            Bodies.rectangle(width, height / 2, 10, height, { isStatic: true }) // Right wall
        ];
        World.add(world, walls);

        // Simulate the Dynamic Island as an obstacle at the top
        const dynamicIsland = Bodies.rectangle(width / 2, 50, width * 0.4, 20, {
            isStatic: true,
            render: { fillStyle: "gray" }
        });
        World.add(world, dynamicIsland);

        // Create balls
        let balls = [];
        function dropBalls() {
            for (let i = 0; i < 30; i++) {
                let ball = Bodies.circle(width / 2, 10, 5, {
                    restitution: 0.6,
                    friction: 0.05,
                    render: { fillStyle: "yellow" }
                });
                balls.push(ball);
                World.add(world, ball);
            }
        }
        setTimeout(dropBalls, 1000); // Delay drop to simulate falling from top

        // Handle device motion
        window.addEventListener("devicemotion", (event) => {
            const acceleration = event.accelerationIncludingGravity;
            if (acceleration) {
                engine.world.gravity.x = acceleration.x / 5;  // Adjust gravity based on tilt
                engine.world.gravity.y = acceleration.y / 5;  // Adjust gravity based on phone movement
            }
        });

        // Resize canvas on window resize
        window.addEventListener("resize", () => {
            render.canvas.width = window.innerWidth;
            render.canvas.height = window.innerHeight;
        });

    </script>
</body>
</html>
